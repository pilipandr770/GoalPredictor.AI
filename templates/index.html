{% extends "base.html" %}

{% block content %}
<!-- Hero Section -->
<section class="hero">
    <div class="container">
        <div class="hero-content">
            <h1>‚öΩ Intelligente Fu√üballvorhersagen</h1>
            <p class="lead">
                Wir nutzen maschinelles Lernen und statistische Analysen zur Vorhersage von 
                Spielergebnissen der Top-5 europ√§ischen Ligen
            </p>
            <div class="hero-stats">
                <div class="stat">
                    <span class="stat-number">70%+</span>
                    <span class="stat-label">Prognosegenauigkeit</span>
                </div>
                <div class="stat">
                    <span class="stat-number">5</span>
                    <span class="stat-label">Top-Ligen Europas</span>
                </div>
                <div class="stat">
                    <span class="stat-number">1000+</span>
                    <span class="stat-label">Nutzer</span>
                </div>
            </div>
            <div class="hero-actions">
                <a href="{{ url_for('predictions') }}" class="btn btn-primary btn-lg">
                    Prognosen ansehen
                </a>
                <a href="{{ url_for('about') }}" class="btn btn-outline btn-lg">
                    Mehr erfahren
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="features">
    <div class="container">
        <h2 class="section-title">Warum GoalPredictor.AI?</h2>
        
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-brain"></i>
                </div>
                <h3>Maschinelles Lernen</h3>
                <p>
                    Wir verwenden fortschrittliche ML-Algorithmen (LightGBM, XGBoost) 
                    zur Analyse von √ºber 30 statistischen Indikatoren
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <h3>Tiefgr√ºndige Analytik</h3>
                <p>
                    Wir analysieren Teamform, Heim-/Ausw√§rtsstatistiken, 
                    direkte Begegnungen und vieles mehr
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-lightbulb"></i>
                </div>
                <h3>KI-Erkl√§rungen</h3>
                <p>
                    GPT-4 generiert verst√§ndliche Erkl√§rungen f√ºr jede Prognose 
                    und zeigt die Schl√ºsselfaktoren auf
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-clock"></i>
                </div>
                <h3>T√§gliche Updates</h3>
                <p>
                    Erhalten Sie jeden Morgen frische Prognosen f√ºr die Spiele des Tages 
                    mit aktuellen Statistiken
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h3>Transparenz</h3>
                <p>
                    Wir zeigen die Genauigkeit unserer Prognosen und verstecken keine Fehler. 
                    Ehrlichkeit ist unsere Priorit√§t
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-balance-scale"></i>
                </div>
                <h3>Legalit√§t</h3>
                <p>
                    Wir sind nicht mit Buchmachern verbunden und nehmen keine Wetten an. 
                    Nur reine Analytik
                </p>
            </div>
        </div>
    </div>
</section>

<!-- Today's Top Predictions -->
<section class="today-predictions">
    <div class="container">
        <h2 class="section-title">üéØ Top-Prognosen heute</h2>
        
        <div id="predictions-container" class="predictions-grid">
            <!-- Wird √ºber JS gef√ºllt -->
            <div class="loading">
                <i class="fas fa-spinner fa-spin"></i>
                Prognosen werden geladen...
            </div>
        </div>
        
        <div class="text-center mt-4">
            <a href="{{ url_for('predictions') }}" class="btn btn-primary">
                Alle Prognosen ansehen
            </a>
        </div>
    </div>
</section>

<!-- How It Works -->
<section class="how-it-works">
    <div class="container">
        <h2 class="section-title">Wie funktioniert es?</h2>
        
        <div class="steps">
            <div class="step">
                <div class="step-number">1</div>
                <h3>Datensammlung</h3>
                <p>
                    T√§glich laden wir aktuelle Spieldaten, 
                    Teamstatistiken und Historie √ºber die Football API
                </p>
            </div>
            
            <div class="step">
                <div class="step-number">2</div>
                <h3>ML-Modellanalyse</h3>
                <p>
                    Das trainierte Modell analysiert √ºber 30 Merkmale und berechnet 
                    die Wahrscheinlichkeit verschiedener Spielausg√§nge
                </p>
            </div>
            
            <div class="step">
                <div class="step-number">3</div>
                <h3>Erkl√§rungsgenerierung</h3>
                <p>
                    GPT-4 erstellt eine verst√§ndliche Texterkl√§rung der Prognose 
                    und zeigt die Schl√ºsselfaktoren auf
                </p>
            </div>
            
            <div class="step">
                <div class="step-number">4</div>
                <h3>Bereitstellung f√ºr Nutzer</h3>
                <p>
                    Sie erhalten Prognosen √ºber die Weboberfl√§che oder per E-Mail-Newsletter 
                    (f√ºr Premium-Abonnenten)
                </p>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="cta">
    <div class="container">
        <h2>Erhalten Sie noch heute pr√§zise Prognosen!</h2>
        <p>Schlie√üen Sie sich Tausenden von Nutzern an, die unserer Analytik vertrauen</p>
        <div class="cta-buttons">
            <a href="{{ url_for('pricing') }}" class="btn btn-primary btn-lg">
                Tarif w√§hlen
            </a>
            <a href="{{ url_for('predictions') }}" class="btn btn-outline btn-lg">
                Kostenlos testen
            </a>
        </div>
    </div>
</section>

<script>
// –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ–≥–Ω–æ–∑—ã –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
document.addEventListener('DOMContentLoaded', function() {
    loadTodaysPredictions();
});

async function loadTodaysPredictions() {
    try {
        const response = await fetch('/api/matches/today');
        const data = await response.json();
        
        if (data.success && data.predictions.length > 0) {
            displayPredictions(data.predictions.slice(0, 3));
        } else {
            // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–ª–µ–¥—É—é—â–∏—Ö –º–∞—Ç—á–∞—Ö
            const upcomingMatches = data.upcoming_matches || [];
            if (upcomingMatches && upcomingMatches.nearest_date) {
                const nearestDate = new Date(upcomingMatches.nearest_date);
                const dateStr = nearestDate.toLocaleDateString('de-DE', { 
                    day: 'numeric', 
                    month: 'long',
                    weekday: 'long'
                });
                
                let matchCount = upcomingMatches.matches ? upcomingMatches.matches.length : 0;
                let matchText = matchCount === 1 ? 'Spiel' : 'Spiele';
                
                document.getElementById('predictions-container').innerHTML = `
                    <div style="text-align: center; padding: 2rem; background: #f8f9fa; border-radius: 12px;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">üìÖ</div>
                        <h4 style="color: #667eea; margin-bottom: 1rem;">Heute keine Spiele</h4>
                        <p style="font-size: 1.1rem; margin-bottom: 0.5rem;">
                            <strong>N√§chste Spiele:</strong><br>
                            ${dateStr}
                        </p>
                        <p style="color: #666; font-size: 0.95rem;">
                            ${matchCount} ${matchText} im Spielplan
                        </p>
                        <a href="/predictions" class="btn btn-primary" style="margin-top: 1rem;">
                            Spielplan ansehen
                        </a>
                    </div>
                `;
            } else {
                document.getElementById('predictions-container').innerHTML = 
                    '<p class="text-center">Heute keine Prognosen</p>';
            }
        }
    } catch (error) {
        console.error('Fehler beim Laden der Prognosen:', error);
        document.getElementById('predictions-container').innerHTML = 
            '<p class="text-center text-danger">Fehler beim Laden der Prognosen</p>';
    }
}

function displayPredictions(predictions) {
    const container = document.getElementById('predictions-container');
    container.innerHTML = predictions.map(pred => `
        <div class="prediction-card">
            <div class="prediction-match">
                <span class="team">${pred.match_info.home_team}</span>
                <span class="vs">vs</span>
                <span class="team">${pred.match_info.away_team}</span>
            </div>
            <div class="prediction-league">${pred.match_info.league}</div>
            <div class="prediction-probability">
                <div class="probability-bar">
                    <div class="probability-fill" style="width: ${pred.probability * 100}%"></div>
                </div>
                <span class="probability-value">${(pred.probability * 100).toFixed(0)}%</span>
            </div>
            <div class="prediction-confidence confidence-${pred.confidence}">
                ${pred.confidence === 'high' ? 'Hohe Konfidenz' : 
                  pred.confidence === 'medium' ? 'Mittlere Konfidenz' : 'Niedrige Konfidenz'}
            </div>
        </div>
    `).join('');
}
</script>
{% endblock %}
