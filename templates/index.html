{% extends "base.html" %}

{% block content %}
<!-- Hero Section -->
<section class="hero">
    <div class="container">
        <div class="hero-content">
            <h1>‚öΩ –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≥–Ω–æ–∑—ã —Ñ—É—Ç–±–æ–ª—å–Ω—ã—Ö –º–∞—Ç—á–µ–π</h1>
            <p class="lead">
                –ò—Å–ø–æ–ª—å–∑—É–µ–º –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è 
                —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –º–∞—Ç—á–µ–π —Ç–æ–ø-5 –µ–≤—Ä–æ–ø–µ–π—Å–∫–∏—Ö –ª–∏–≥
            </p>
            <div class="hero-stats">
                <div class="stat">
                    <span class="stat-number">70%+</span>
                    <span class="stat-label">–¢–æ—á–Ω–æ—Å—Ç—å –ø—Ä–æ–≥–Ω–æ–∑–æ–≤</span>
                </div>
                <div class="stat">
                    <span class="stat-number">5</span>
                    <span class="stat-label">–¢–æ–ø-–ª–∏–≥ –ï–≤—Ä–æ–ø—ã</span>
                </div>
                <div class="stat">
                    <span class="stat-number">1000+</span>
                    <span class="stat-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
                </div>
            </div>
            <div class="hero-actions">
                <a href="{{ url_for('predictions') }}" class="btn btn-primary btn-lg">
                    –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ–≥–Ω–æ–∑—ã
                </a>
                <a href="{{ url_for('about') }}" class="btn btn-outline btn-lg">
                    –£–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="features">
    <div class="container">
        <h2 class="section-title">–ü–æ—á–µ–º—É GoalPredictor.AI?</h2>
        
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-brain"></i>
                </div>
                <h3>–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ</h3>
                <p>
                    –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ ML-–∞–ª–≥–æ—Ä–∏—Ç–º—ã (LightGBM, XGBoost) 
                    –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –±–æ–ª–µ–µ 30 —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <h3>–ì–ª—É–±–æ–∫–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞</h3>
                <p>
                    –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ñ–æ—Ä–º—É –∫–æ–º–∞–Ω–¥, –¥–æ–º–∞—à–Ω–∏–µ/–≤—ã–µ–∑–¥–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏, 
                    –∏—Å—Ç–æ—Ä–∏—é –ª–∏—á–Ω—ã—Ö –≤—Å—Ç—Ä–µ—á –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-lightbulb"></i>
                </div>
                <h3>–û–±—ä—è—Å–Ω–µ–Ω–∏—è –æ—Ç AI</h3>
                <p>
                    GPT-4 –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–≥–Ω–æ–∑–∞, 
                    –ø–æ–∫–∞–∑—ã–≤–∞—è –∫–ª—é—á–µ–≤—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã —Ä–µ—à–µ–Ω–∏—è
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-clock"></i>
                </div>
                <h3>–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</h3>
                <p>
                    –ö–∞–∂–¥–æ–µ —É—Ç—Ä–æ –ø–æ–ª—É—á–∞–π—Ç–µ —Å–≤–µ–∂–∏–µ –ø—Ä–æ–≥–Ω–æ–∑—ã –Ω–∞ –º–∞—Ç—á–∏ –¥–Ω—è 
                    —Å –∞–∫—Ç—É–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h3>–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å</h3>
                <p>
                    –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ—á–Ω–æ—Å—Ç—å –Ω–∞—à–∏—Ö –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ –∏ –Ω–µ —Å–∫—Ä—ã–≤–∞–µ–º –æ—à–∏–±–∫–∏. 
                    –ß–µ—Å—Ç–Ω–æ—Å—Ç—å - –Ω–∞—à –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-balance-scale"></i>
                </div>
                <h3>–õ–µ–≥–∞–ª—å–Ω–æ—Å—Ç—å</h3>
                <p>
                    –ú—ã –Ω–µ —Å–≤—è–∑–∞–Ω—ã —Å –±—É–∫–º–µ–∫–µ—Ä–∞–º–∏ –∏ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ–º —Å—Ç–∞–≤–∫–∏. 
                    –¢–æ–ª—å–∫–æ —á–∏—Å—Ç–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
                </p>
            </div>
        </div>
    </div>
</section>

<!-- Today's Top Predictions -->
<section class="today-predictions">
    <div class="container">
        <h2 class="section-title">üéØ –¢–æ–ø –ø—Ä–æ–≥–Ω–æ–∑—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</h2>
        
        <div id="predictions-container" class="predictions-grid">
            <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ —á–µ—Ä–µ–∑ JS -->
            <div class="loading">
                <i class="fas fa-spinner fa-spin"></i>
                –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–æ–≥–Ω–æ–∑—ã...
            </div>
        </div>
        
        <div class="text-center mt-4">
            <a href="{{ url_for('predictions') }}" class="btn btn-primary">
                –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –ø—Ä–æ–≥–Ω–æ–∑—ã
            </a>
        </div>
    </div>
</section>

<!-- How It Works -->
<section class="how-it-works">
    <div class="container">
        <h2 class="section-title">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</h2>
        
        <div class="steps">
            <div class="step">
                <div class="step-number">1</div>
                <h3>–°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö</h3>
                <p>
                    –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –∑–∞–≥—Ä—É–∂–∞–µ–º –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –º–∞—Ç—á–∞—Ö, 
                    —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–æ–º–∞–Ω–¥ –∏ –∏—Å—Ç–æ—Ä–∏—é —á–µ—Ä–µ–∑ Football API
                </p>
            </div>
            
            <div class="step">
                <div class="step-number">2</div>
                <h3>–ê–Ω–∞–ª–∏–∑ ML-–º–æ–¥–µ–ª—å—é</h3>
                <p>
                    –û–±—É—á–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç 30+ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –∏ –≤—ã—á–∏—Å–ª—è–µ—Ç 
                    –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏—Å—Ö–æ–¥–æ–≤ –º–∞—Ç—á–∞
                </p>
            </div>
            
            <div class="step">
                <div class="step-number">3</div>
                <h3>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–±—ä—è—Å–Ω–µ–Ω–∏–π</h3>
                <p>
                    GPT-4 —Å–æ–∑–¥–∞–µ—Ç –ø–æ–Ω—è—Ç–Ω–æ–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥–Ω–æ–∑–∞, 
                    —É–∫–∞–∑—ã–≤–∞—è –∫–ª—é—á–µ–≤—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã
                </p>
            </div>
            
            <div class="step">
                <div class="step-number">4</div>
                <h3>–î–æ—Å—Ç–∞–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º</h3>
                <p>
                    –í—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –ø—Ä–æ–≥–Ω–æ–∑—ã —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–ª–∏ email-—Ä–∞—Å—Å—ã–ª–∫—É 
                    (–¥–ª—è Premium –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤)
                </p>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="cta">
    <div class="container">
        <h2>–ù–∞—á–Ω–∏—Ç–µ –ø–æ–ª—É—á–∞—Ç—å —Ç–æ—á–Ω—ã–µ –ø—Ä–æ–≥–Ω–æ–∑—ã —É–∂–µ —Å–µ–≥–æ–¥–Ω—è!</h2>
        <p>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ —Ç—ã—Å—è—á–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–≤–µ—Ä—è—é—Ç –Ω–∞—à–µ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–µ</p>
        <div class="cta-buttons">
            <a href="{{ url_for('pricing') }}" class="btn btn-primary btn-lg">
                –í—ã–±—Ä–∞—Ç—å —Ç–∞—Ä–∏—Ñ
            </a>
            <a href="{{ url_for('predictions') }}" class="btn btn-outline btn-lg">
                –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ
            </a>
        </div>
    </div>
</section>

<script>
// –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ–≥–Ω–æ–∑—ã –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
document.addEventListener('DOMContentLoaded', function() {
    loadTodaysPredictions();
});

async function loadTodaysPredictions() {
    try {
        const response = await fetch('/api/matches/today');
        const data = await response.json();
        
        if (data.success && data.predictions.length > 0) {
            displayPredictions(data.predictions.slice(0, 3));
        } else {
            // –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–ª–∏–∂–∞–π—à–∏—Ö –º–∞—Ç—á–∞—Ö
            const upcomingMatches = data.upcoming_matches || [];
            if (upcomingMatches && upcomingMatches.nearest_date) {
                const nearestDate = new Date(upcomingMatches.nearest_date);
                const dateStr = nearestDate.toLocaleDateString('ru-RU', { 
                    day: 'numeric', 
                    month: 'long',
                    weekday: 'long'
                });
                
                let matchCount = upcomingMatches.matches ? upcomingMatches.matches.length : 0;
                let matchText = matchCount === 1 ? '–º–∞—Ç—á' : matchCount < 5 ? '–º–∞—Ç—á–∞' : '–º–∞—Ç—á–µ–π';
                
                document.getElementById('predictions-container').innerHTML = `
                    <div style="text-align: center; padding: 2rem; background: #f8f9fa; border-radius: 12px;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">üìÖ</div>
                        <h4 style="color: #667eea; margin-bottom: 1rem;">–°–µ–≥–æ–¥–Ω—è –º–∞—Ç—á–µ–π –Ω–µ—Ç</h4>
                        <p style="font-size: 1.1rem; margin-bottom: 0.5rem;">
                            <strong>–ë–ª–∏–∂–∞–π—à–∏–µ –º–∞—Ç—á–∏:</strong><br>
                            ${dateStr}
                        </p>
                        <p style="color: #666; font-size: 0.95rem;">
                            ${matchCount} ${matchText} –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏
                        </p>
                        <a href="/predictions" class="btn btn-primary" style="margin-top: 1rem;">
                            –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
                        </a>
                    </div>
                `;
            } else {
                document.getElementById('predictions-container').innerHTML = 
                    '<p class="text-center">–°–µ–≥–æ–¥–Ω—è –Ω–µ—Ç –ø—Ä–æ–≥–Ω–æ–∑–æ–≤</p>';
            }
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤:', error);
        document.getElementById('predictions-container').innerHTML = 
            '<p class="text-center text-danger">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤</p>';
    }
}

function displayPredictions(predictions) {
    const container = document.getElementById('predictions-container');
    container.innerHTML = predictions.map(pred => `
        <div class="prediction-card">
            <div class="prediction-match">
                <span class="team">${pred.match_info.home_team}</span>
                <span class="vs">vs</span>
                <span class="team">${pred.match_info.away_team}</span>
            </div>
            <div class="prediction-league">${pred.match_info.league}</div>
            <div class="prediction-probability">
                <div class="probability-bar">
                    <div class="probability-fill" style="width: ${pred.probability * 100}%"></div>
                </div>
                <span class="probability-value">${(pred.probability * 100).toFixed(0)}%</span>
            </div>
            <div class="prediction-confidence confidence-${pred.confidence}">
                ${pred.confidence === 'high' ? '–í—ã—Å–æ–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å' : 
                  pred.confidence === 'medium' ? '–°—Ä–µ–¥–Ω—è—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å' : '–ù–∏–∑–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å'}
            </div>
        </div>
    `).join('');
}
</script>
{% endblock %}
