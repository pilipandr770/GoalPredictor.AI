# –ê–Ω–∞–ª–∏–∑ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö: –û–±—É—á–µ–Ω–∏–µ vs API

## üìä –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è

### –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö

#### 1. –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π (–ü–†–û–®–õ–û–ï)
- **–ò—Å—Ç–æ—á–Ω–∏–∫**: football-data.co.uk (CSV —Ñ–∞–π–ª—ã)
- **–ü–µ—Ä–∏–æ–¥**: 2020-2025
- **–î–∞–Ω–Ω—ã–µ**: 5024 –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –º–∞—Ç—á–∞ —Å –ø–æ–ª–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- **–§–æ—Ä–º–∞—Ç**: CSV —Å –ø–æ–ª—è–º–∏ (FTHG, FTAG, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã)

#### 2. API –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π (–ë–£–î–£–©–ï–ï)
- **–ò—Å—Ç–æ—á–Ω–∏–∫**: Football-Data.org API
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –±—É–¥—É—â–∏—Ö –º–∞—Ç—á–µ–π
- **–î–∞–Ω–Ω—ã–µ**: –¢–æ–ª—å–∫–æ –±–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–∫–æ–º–∞–Ω–¥—ã, –¥–∞—Ç–∞, –ª–∏–≥–∞)
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**: 10 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω, 100/–¥–µ–Ω—å (free tier)

## ‚úÖ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç API Football-Data.org?

API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–∞—Ç—á–∞:
```json
{
  "id": 123456,
  "utcDate": "2025-10-06T15:00:00Z",
  "status": "SCHEDULED",
  "competition": {"name": "Premier League", "code": "PL"},
  "homeTeam": {"id": 1, "name": "Arsenal", "crest": "..."},
  "awayTeam": {"id": 2, "name": "Chelsea", "crest": "..."},
  "score": {"fullTime": {"home": null, "away": null}},
  "venue": "Emirates Stadium"
}
```

**API –ù–ï –î–ê–ï–¢:**
- ‚ùå –§–æ—Ä–º—É –∫–æ–º–∞–Ω–¥—ã (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –º–∞—Ç—á–µ–π)
- ‚ùå –ì–æ–ª—ã –∑–∞/–ø—Ä–æ—Ç–∏–≤
- ‚ùå –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É H2H
- ‚ùå –°—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ–ª–æ–≤
- ‚ùå –û—á–∫–∏ —Ñ–æ—Ä–º—ã

## üéØ –ö–∞–∫ –º–æ–¥–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç –Ω—É–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ?

### –ü—Ä–æ—Ü–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è:

```
1. API ‚Üí –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –º–∞—Ç—á–∞ (—Ç–æ–ª—å–∫–æ: home_team_id, away_team_id, date, league)
                ‚Üì
2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö ‚Üí –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –º–∞—Ç—á–µ–π –∫–æ–º–∞–Ω–¥
                ‚Üì
3. generate_predictions.py ‚Üí –í—ã—á–∏—Å–ª–µ–Ω–∏–µ 20 –ø—Ä–∏–∑–Ω–∞–∫–æ–≤:
   ‚îú‚îÄ calculate_recent_stats(team_id) 
   ‚îÇ  ‚îî‚îÄ –ó–∞–ø—Ä–æ—Å –≤ –ë–î: –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –º–∞—Ç—á–µ–π –∫–æ–º–∞–Ω–¥—ã
   ‚îÇ     ‚îî‚îÄ –í—ã—á–∏—Å–ª—è–µ—Ç: wins, draws, losses, goals_for, goals_against, form_points, avg_goals
   ‚îÇ
   ‚îî‚îÄ calculate_h2h(home_id, away_id)
      ‚îî‚îÄ –ó–∞–ø—Ä–æ—Å –≤ –ë–î: –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–∞—Ç—á–∞ H2H
         ‚îî‚îÄ –í—ã—á–∏—Å–ª—è–µ—Ç: h2h_home_wins, h2h_draws, h2h_away_wins
                ‚Üì
4. ML –º–æ–¥–µ–ª–∏ ‚Üí –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ (–∏—Å–ø–æ–ª—å–∑—É—è –≤—ã—á–∏—Å–ª–µ–Ω–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏)
```

## ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–∏–∑–Ω–∞–∫–∏ (Features) - 20 —à—Ç—É–∫:

| ‚Ññ | –ü—Ä–∏–∑–Ω–∞–∫ | –ò—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∏ –æ–±—É—á–µ–Ω–∏–∏ | –ò—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–∏ |
|---|---------|----------------------|---------------------------|
| 1 | home_recent_wins | CSV ‚Üí prepare_training_data.py | –ë–î ‚Üí calculate_recent_stats() |
| 2 | home_recent_draws | CSV ‚Üí prepare_training_data.py | –ë–î ‚Üí calculate_recent_stats() |
| 3 | home_recent_losses | CSV ‚Üí prepare_training_data.py | –ë–î ‚Üí calculate_recent_stats() |
| 4 | home_recent_goals_for | CSV ‚Üí prepare_training_data.py | –ë–î ‚Üí calculate_recent_stats() |
| 5 | home_recent_goals_against | CSV ‚Üí prepare_training_data.py | –ë–î ‚Üí calculate_recent_stats() |
| 6 | home_recent_form_points | CSV ‚Üí prepare_training_data.py | –ë–î ‚Üí calculate_recent_stats() |
| 7-12 | away_recent_* | –¢–æ –∂–µ –¥–ª—è –≥–æ—Å—Ç–µ–π | –¢–æ –∂–µ –¥–ª—è –≥–æ—Å—Ç–µ–π |
| 13 | h2h_home_wins | CSV ‚Üí calculate_head_to_head() | –ë–î ‚Üí calculate_h2h() |
| 14 | h2h_draws | CSV ‚Üí calculate_head_to_head() | –ë–î ‚Üí calculate_h2h() |
| 15 | h2h_away_wins | CSV ‚Üí calculate_head_to_head() | –ë–î ‚Üí calculate_h2h() |
| 16 | home_avg_goals | CSV ‚Üí –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è | –ë–î ‚Üí –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è |
| 17 | home_total_matches | CSV ‚Üí count | –ë–î ‚Üí count |
| 18 | away_avg_goals | CSV ‚Üí –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è | –ë–î ‚Üí –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è |
| 19 | away_total_matches | CSV ‚Üí count | –ë–î ‚Üí count |
| 20 | total_goals | CSV ‚Üí —Å—É–º–º–∞ | –ë–î ‚Üí —Å—É–º–º–∞ |

### ‚úÖ –û—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å: **–î–ê, –¥–∞–Ω–Ω—ã–µ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã!**

**–ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

1. **API –¥–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ** (home_team, away_team, date)
2. **–ú—ã –≤—ã—á–∏—Å–ª—è–µ–º –ø—Ä–∏–∑–Ω–∞–∫–∏ –°–ê–ú–ò** –∏–∑ –Ω–∞—à–µ–π –±–∞–∑—ã —Å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º–∏ –º–∞—Ç—á–∞–º–∏
3. **–õ–æ–≥–∏–∫–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –û–î–ò–ù–ê–ö–û–í–ê–Ø** –ø—Ä–∏ –æ–±—É—á–µ–Ω–∏–∏ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–∏:
   - `prepare_training_data.py` ‚Üí –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∏–∑ CSV ‚Üí –æ–±—É—á–µ–Ω–∏–µ
   - `generate_predictions.py` ‚Üí –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∏–∑ –ë–î ‚Üí –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ
   
4. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç –¢–ï –ñ–ï –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ**, —á—Ç–æ –∏ CSV (5024 –º–∞—Ç—á–∞ –∏–∑ football-data.co.uk)

## üîç –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –º–æ–º–µ–Ω—Ç

**–î–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –Ω—É–∂–Ω–æ:**

‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º–∏ –º–∞—Ç—á–∞–º–∏ (—É –Ω–∞—Å –µ—Å—Ç—å: 5024 –º–∞—Ç—á–∞)
‚úÖ –ö–æ–º–∞–Ω–¥—ã –≤ –ë–î –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –∫–æ–º–∞–Ω–¥–∞–º–∏ –∏–∑ API
‚úÖ –§—É–Ω–∫—Ü–∏–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–¥–µ–Ω—Ç–∏—á–Ω—ã

## ‚ö†Ô∏è –¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –û—à–∏–±–∫–∞ "list indices must be integers or slices, not str"

**–ì–¥–µ**: –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –º–æ–¥–µ–ª–∏ –≤ `ml/predict.py` –∏–ª–∏ `ml/model.py`

**–ü—Ä–∏—á–∏–Ω–∞**: –°—Ç–∞—Ä—ã–π –∫–æ–¥ –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥–µ–ª—å –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ

**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `generate_predictions.py` –Ω–∞–ø—Ä—è–º—É—é (–æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ)

### 2. –û—à–∏–±–∫–∞ "matches.filter is not a function"

**–ì–¥–µ**: Frontend JavaScript (`static/js/main.js`)

**–ü—Ä–∏—á–∏–Ω–∞**: –ö–æ–¥ –ø—ã—Ç–∞–µ—Ç—Å—è –≤—ã–∑–≤–∞—Ç—å `.filter()` –Ω–∞ –æ–±—ä–µ–∫—Ç–µ, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –º–∞—Å—Å–∏–≤–æ–º

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤, –∞ –Ω–µ –æ–±—ä–µ–∫—Ç

### 3. –û—à–∏–±–∫–∞ "429 Client Error" - Too Many Requests

**–ì–¥–µ**: API Football-Data.org

**–ü—Ä–∏—á–∏–Ω–∞**: –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç 10 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É

**–†–µ—à–µ–Ω–∏–µ**: 
- –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- –î–æ–±–∞–≤–∏—Ç—å rate limiting
- –ó–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –≤—Å–µ –ª–∏–≥–∏ –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º, –µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –º–æ–¥–µ–ª–∏** –≤ —Å—Ç–∞—Ä–æ–º –∫–æ–¥–µ (ml/predict.py)
2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å JavaScript** –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ (static/js/main.js)
3. **–î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤
4. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç** (`generate_predictions.py`)

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥** –º–µ–∂–¥—É –ë–î –∏ API
2. **–î–æ–±–∞–≤–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥ –∫–æ–º–∞–Ω–¥** (Arsenal API ‚Üí Arsenal –ë–î)
3. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**: —Ä–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –ë–î –∏–∑ football-data.co.uk
4. **Fallback –∑–Ω–∞—á–µ–Ω–∏—è**: –µ—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –Ω–æ–≤–∞—è (–Ω–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏), –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ä–µ–¥–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è

## üìã Checklist —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

- ‚úÖ –ú–æ–¥–µ–ª–∏ –æ–±—É—á–µ–Ω—ã –Ω–∞ 20 –ø—Ä–∏–∑–Ω–∞–∫–∞—Ö
- ‚úÖ generate_predictions.py –≤—ã—á–∏—Å–ª—è–µ—Ç —Ç–µ –∂–µ 20 –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –õ–æ–≥–∏–∫–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∏–¥–µ–Ω—Ç–∏—á–Ω–∞
- ‚ö†Ô∏è –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π –∫–æ–º–∞–Ω–¥
- ‚ö†Ô∏è –ù—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏
- ‚ö†Ô∏è –ù—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å JavaScript –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

## üí° –í—ã–≤–æ–¥

**API –∏ –æ–±—É—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –†–ê–ó–ù–´–ï –∏—Å—Ç–æ—á–Ω–∏–∫–∏, –ù–û:**
- API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¢–û–õ–¨–ö–û –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- –ü—Ä–∏–∑–Ω–∞–∫–∏ –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è –ò–ó –ë–ê–ó–´ –î–ê–ù–ù–´–•, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ –∂–µ –¥–∞–Ω–Ω—ã–µ —á—Ç–æ –∏ –ø—Ä–∏ –æ–±—É—á–µ–Ω–∏–∏
- –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏

**–î–∞–Ω–Ω—ã–µ –ù–ï –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–∑ –æ–¥–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞, –í–ê–ñ–ù–û —á—Ç–æ–±—ã:**
1. –ü—Ä–∏–∑–Ω–∞–∫–∏ –≤—ã—á–∏—Å–ª—è–ª–∏—Å—å –æ–¥–∏–Ω–∞–∫–æ–≤–æ
2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –±—ã–ª–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π
3. –ù–∞–∑–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥ —Å–æ–≤–ø–∞–¥–∞–ª–∏
